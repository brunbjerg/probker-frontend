<!-- probker_view.jl.html -->
<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
  <link href="/css/genie/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link href="/css/genie/style.css" rel="stylesheet">
  <link href="/css/genie/prism.css" rel="stylesheet">
</head>

<body>
	<h1>Welcome to Probker!</h1>
	<h3>Here you can calculate probabilities of poker hands</h3>

	<h2>Number of Players</h2>
    <table>
      <tr>
        <td><button class="btn btn-probker-players" onclick="setPlayers(2)" type="hidden" id="p2" name="players" value="2">2</button></td>
        <td><button class="btn btn-probker-players" onclick="setPlayers(3)" type="hidden" id="p3" name="players" value="3">3</button></td>
        <td><button class="btn btn-probker-players" onclick="setPlayers(4)" type="hidden" id="p4" name="players" value="4">4</button></td>
        <td><button class="btn btn-probker-players" onclick="setPlayers(5)" type="hidden" id="p5" name="players" value="5">5</button></td>
        <td><button class="btn btn-probker-players" onclick="setPlayers(6)" type="hidden" id="p6" name="players" value="6">6</button></td>
        <td><button class="btn btn-probker-players" onclick="setPlayers(7)" type="hidden" id="p7" name="players" value="7">7</button></td>
        <td><button class="btn btn-probker-players" onclick="setPlayers(8)" type="hidden" id="p8" name="players" value="8">8</button></td>
        <td><button class="btn btn-probker-players" onclick="setPlayers(9)" type="hidden" id="p9" name="players" value="9">9</button></td>
      </tr>
    </table>
    <h2>Choose hidden players</h2>
      <table id="hidden_table"></table>
    
      <script>
        function setPlayers(n) {

          // I should change this. I do not want to build these tables each time that I 
          // rerun the code. How can I do this? I use these command to reset the whole
          // thing. I would have to change the the size of the table. Does folding 
          // method make more sense? 

          // There is a more general question here? How should we handle the fact that
          // the probabilities are misleading when the other people fold? I cannot think
          // of any systematic way. I think that I should just leave this aspect out.
          // Yes. I will add it later if there is some good approach in testing. 

          // This means that the model assumes that players always, no matter what
          // have random hands. This assumption is not a good one to make.
          // Do people understand this? I really do not think so. Jonas did not seem
          // to grasp the idea that well. Could I somehow provide a measure for this?
          // Maybe include a number correcting for the number of folded hands? Maybe
          // give two propabilities. The other one could make the assumption that the 
          // remaining players have the best hands on the table and then distribute the
          // probabilities for the folded hands onto the remaining players. Yes! This 
          // is the best approach until now! No not the remaining players, instead all
          // but player one. Yes, but this gets wierd when we look at many players cards
          // instead of just

          // I should also change the layout so that you always only get the information
          // that I need. 

          // First I will refactor code by seperating js from html. First I will commit
          // to git

          // This means that we need to keep track of the folded hands. 
          // document.getElementById("table_player_card").innerHTML = "";
          // document.getElementById("table_flop_turn_river").innerHTML = "";
          let p = "p"
          for (i = 2; i <= 9; i++) {
            var i_string = i;
            i_string.toString();
            document.getElementById(p.concat(i_string)).classList.add('btn-probker-players')
            document.getElementById(p.concat(i_string)).classList.remove('btn-probker-clicked')
            
          }
          let n_string = n;
          n_string.toString()
          document.getElementById("hidden_table").innerHTML = ""
          document.getElementById(p.concat(n_string)).classList.toggle('btn-probker-clicked');
        
          for (i=2; i <= n + 1; i++ ) {
            var header = document.createElement('th');
            header.innerHTML = `<button onclick='Set_Hidden_Player(${i});highlight("H${i-1}")' id="H${i-1}" class="btn btn-probker-players">${i-1}</button>`;
            document.getElementById("hidden_table").appendChild(header);
          }

          // Create table for player cards
          // document.getElementById("table_player_card").innerHTML = ""
          const player_table = document.getElementById("table_player_card")
          let j = 0;
          for(i = 1 ; i <= 2*n ; i++) {
            if ((i - 1) % 4 == 0){
              j += 1
              table_row = document.createElement('tr')
              table_row.setAttribute("id", j + "_table_row")
            }
            let table_element = document.createElement('td')
            table_element.setAttribute("id", i + "_table_element")
            table_element.setAttribute("width", "70")
            table_element.setAttribute("height", "105")
            table_element.innerHTML = `<h1>p${Math.round(i/2)}</h1>`
            table_element.innerHTML = `<h1>p${Math.round(i/2)}</h1>`
            table_row.appendChild(table_element)
            if ((i - 1) % 4 == 0){
            player_table.appendChild(table_row)
            }
          }

          const table_flop_turn_river = document.getElementById("table_flop_turn_river")

          // ftr: flop_turn_river
          let table_row_ftr = document.createElement('tr')
          table_row_ftr.setAttribute("id", "table_flop_turn_river_row")

          let table_element_flop1 = document.createElement('td')
          table_element_flop1.setAttribute("id", "flop_element")
          table_element_flop1.setAttribute("width", "70")
          table_element_flop1.setAttribute("height", "105")
          table_element_flop1.innerHTML = `<h1>F1</h1>`

          let table_element_flop2 = document.createElement('td')
          table_element_flop2.setAttribute("id", "flop_element")
          table_element_flop2.setAttribute("width", "70")
          table_element_flop2.setAttribute("height", "105")
          table_element_flop2.innerHTML = `<h1>F2</h1>`

          let table_element_flop3 = document.createElement('td')
          table_element_flop3.setAttribute("id", "flop_element")
          table_element_flop3.setAttribute("width", "70")
          table_element_flop3.setAttribute("height", "105")
          table_element_flop3.innerHTML = `<h1>F3</h1>`

          let table_element_turn = document.createElement('td')
          table_element_turn.setAttribute("id", "turn_element")
          table_element_turn.setAttribute("width", "70")
          table_element_turn.setAttribute("height", "105")
          table_element_turn.innerHTML = `<h1>T</h1>`

          let table_element_river = document.createElement('td')
          table_element_river.setAttribute("id", "river_element")
          table_element_river.setAttribute("width", "70")
          table_element_river.setAttribute("height", "105")
          table_element_river.innerHTML = `<h1>R</h1>`

          table_row_ftr.appendChild(table_element_flop1)
          table_row_ftr.appendChild(table_element_flop2)
          table_row_ftr.appendChild(table_element_flop3)
          table_row_ftr.appendChild(table_element_turn)
          table_row_ftr.appendChild(table_element_river)

          table_flop_turn_river.appendChild(table_row_ftr)
        }

        function highlight(id){

          document.getElementById(id).classList.toggle('btn-probker-clicked')


        }
        function Set_Hidden_Player(p) {
          p -= 1
          p *= 2
          if (document.getElementById(p + "_table_element").innerHTML[4] =="p" ) {
            document.getElementById(p + "_table_element").innerHTML = "<h1>H</h1>"
            document.getElementById(p - 1 + "_table_element").innerHTML = "<h1>H</h1>"
          } else {
            document.getElementById(p + "_table_element").innerHTML = `<h1>p${p/2}</h1>`
            document.getElementById(p - 1 + "_table_element").innerHTML = `<h1>p${p/2}</h1>`
          }
        }

      </script>
    <h2>Choose Cards</h2>

    <div class="container text-center">
      <div class="row justify-content-md-center">
        <div class="col">
          <span id="H1_b"><button onclick="getcard('H1_b');highlight('H1c')" id="H1c" class="btn btn-probker"><img src="img/card_icons/card(7).svg" width="65" height="100"/></button></span>
          <span id="H2_b"><button onclick="getcard('H2_b');highlight('H2c')" id="H2c" class="btn btn-probker"><img src="img/card_icons/card(11).svg" width="65" height="100"/></button></span>
          <span id="H3_b"><button onclick="getcard('H3_b');highlight('H3c')" id="H3c" class="btn btn-probker"><img src="img/card_icons/card(15).svg" width="65" height="100"/></button></span>
          <span id="H4_b"><button onclick="getcard('H4_b');highlight('H4c')" id="H4c" class="btn btn-probker"><img src="img/card_icons/card(19).svg" width="65" height="100"/></button></span>
          <span id="H5_b"><button onclick="getcard('H5_b');highlight('H5c')" id="H5c" class="btn btn-probker"><img src="img/card_icons/card(23).svg" width="65" height="100"/></button></span>
          <span id="H6_b"><button onclick="getcard('H6_b');highlight('H6c')" id="H6c" class="btn btn-probker"><img src="img/card_icons/card(27).svg" width="65" height="100"/></button></span>
          <span id="H7_b"><button onclick="getcard('H7_b');highlight('H7c')" id="H7c" class="btn btn-probker"><img src="img/card_icons/card(31).svg" width="65" height="100"/></button></span>
          <span id="H8_b"><button onclick="getcard('H8_b');highlight('H8c')" id="H8c" class="btn btn-probker"><img src="img/card_icons/card(35).svg" width="65" height="100"/></button></span>
          <span id="H9_b"><button onclick="getcard('H9_b');highlight('H9c')" id="H9c" class="btn btn-probker"><img src="img/card_icons/card(39).svg" width="65" height="100"/></button></span>
          <span id="H10_b"><button onclick="getcard('H10_b');highlight('H10c')" id="H10c" class="btn btn-probker"><img src="img/card_icons/card(43).svg" width="65" height="100"/></button></span>
          <span id="H11_b"><button onclick="getcard('H11_b');highlight('H11c')" id="H11c" class="btn btn-probker"><img src="img/card_icons/card(47).svg" width="65" height="100"/></button></span>
          <span id="H12_b"><button onclick="getcard('H12_b');highlight('H12c')" id="H12c" class="btn btn-probker"><img src="img/card_icons/card(51).svg" width="65" height="100"/></button></span>
          <span id="H13_b"><button onclick="getcard('H13_b');highlight('H13c')" id="H13c" class="btn btn-probker"><img src="img/card_icons/card(3).svg" width="65" height="100"/></button></span>
        </div>
        <div class="col">
          <span id="S1_b"><button onclick="getcard('S1_b');highlight('S1c')" id="S1c" class="btn btn-probker"><img src="img/card_icons/card(4).svg" width="65" height="100"/></button></span>
          <span id="S2_b"><button onclick="getcard('S2_b');highlight('S2c')" id="S2c" class="btn btn-probker"><img src="img/card_icons/card(8).svg" width="65" height="100"/></button></span>
          <span id="S3_b"><button onclick="getcard('S3_b');highlight('S3c')" id="S3c" class="btn btn-probker"><img src="img/card_icons/card(12).svg" width="65" height="100"/></button></span>
          <span id="S4_b"><button onclick="getcard('S4_b');highlight('S4c')" id="S4c" class="btn btn-probker"><img src="img/card_icons/card(16).svg" width="65" height="100"/></button></span>
          <span id="S5_b"><button onclick="getcard('S5_b');highlight('S5c')" id="S5c" class="btn btn-probker"><img src="img/card_icons/card(20).svg" width="65" height="100"/></button></span>
          <span id="S6_b"><button onclick="getcard('S6_b');highlight('S6c')" id="S6c" class="btn btn-probker"><img src="img/card_icons/card(24).svg" width="65" height="100"/></button></span>
          <span id="S7_b"><button onclick="getcard('S7_b');highlight('S7c')" id="S7c" class="btn btn-probker"><img src="img/card_icons/card(28).svg" width="65" height="100"/></button></span>
          <span id="S8_b"><button onclick="getcard('S8_b');highlight('S8c')" id="S8c" class="btn btn-probker"><img src="img/card_icons/card(32).svg" width="65" height="100"/></button></span>
          <span id="S9_b"><button onclick="getcard('S9_b');highlight('S9c')" id="S9c" class="btn btn-probker"><img src="img/card_icons/card(36).svg" width="65" height="100"/></button></span>
          <span id="S10_b"><button onclick="getcard('S10_b');highlight('S10c')" id="S10c" class="btn btn-probker"><img src="img/card_icons/card(40).svg" width="65" height="100"/></button></span>
          <span id="S11_b"><button onclick="getcard('S11_b');highlight('S11c')" id="S11c" class="btn btn-probker"><img src="img/card_icons/card(44).svg" width="65" height="100"/></button></span>
          <span id="S12_b"><button onclick="getcard('S12_b');highlight('S12c')" id="S12c" class="btn btn-probker"><img src="img/card_icons/card(48).svg" width="65" height="100"/></button></span>
          <span id="S13_b"><button onclick="getcard('S13_b');highlight('S13c')" id="S13c" class="btn btn-probker"><img src="img/card_icons/card(53).svg" width="65" height="100"/></button></span>
        </div>
        <div class="col">
          <span id="D1_b"><button onclick="getcard('D1_b');highlight('D1c')" id="D1c" class="btn btn-probker"><img src="img/card_icons/card(6).svg" width="65" height="100"/></button></span>
          <span id="D2_b"><button onclick="getcard('D2_b');highlight('D2c')" id="D2c" class="btn btn-probker"><img src="img/card_icons/card(10).svg" width="65" height="100"/></button></span>
          <span id="D3_b"><button onclick="getcard('D3_b');highlight('D3c')" id="D3c" class="btn btn-probker"><img src="img/card_icons/card(14).svg" width="65" height="100"/></button></span>
          <span id="D4_b"><button onclick="getcard('D4_b');highlight('D4c')" id="D4c" class="btn btn-probker"><img src="img/card_icons/card(18).svg" width="65" height="100"/></button></span>
          <span id="D5_b"><button onclick="getcard('D5_b');highlight('D5c')" id="D5c" class="btn btn-probker"><img src="img/card_icons/card(22).svg" width="65" height="100"/></button></span>
          <span id="D6_b"><button onclick="getcard('D6_b');highlight('D6c')" id="D6c" class="btn btn-probker"><img src="img/card_icons/card(26).svg" width="65" height="100"/></button></span>
          <span id="D7_b"><button onclick="getcard('D7_b');highlight('D7c')" id="D7c" class="btn btn-probker"><img src="img/card_icons/card(30).svg" width="65" height="100"/></button></span>
          <span id="D8_b"><button onclick="getcard('D8_b');highlight('D8c')" id="D8c" class="btn btn-probker"><img src="img/card_icons/card(34).svg" width="65" height="100"/></button></span>
          <span id="D9_b"><button onclick="getcard('D9_b');highlight('D9c')" id="D9c" class="btn btn-probker"><img src="img/card_icons/card(38).svg" width="65" height="100"/></button></span>
          <span id="D10_b"><button onclick="getcard('D10_b');highlight('D10c')" id="D10c" class="btn btn-probker"><img src="img/card_icons/card(42).svg" width="65" height="100"/></button></span>
          <span id="D11_b"><button onclick="getcard('D11_b');highlight('D11c')" id="D11c" class="btn btn-probker"><img src="img/card_icons/card(46).svg" width="65" height="100"/></button></span>
          <span id="D12_b"><button onclick="getcard('D12_b');highlight('D12c')" id="D12c" class="btn btn-probker"><img src="img/card_icons/card(50).svg" width="65" height="100"/></button></span>
          <span id="D13_b"><button onclick="getcard('D13_b');highlight('D13c')" id="D13c" class="btn btn-probker"><img src="img/card_icons/card(2).svg" width="65" height="100"/></button></span>
        </div>
        <div class="col">
          <span id="C1_b"><button onclick="getcard('C1_b');highlight('C1c')" id="C1c" class="btn btn-probker"><img src="img/card_icons/card(5).svg" width="65" height="100"/></button></span>
          <span id="C2_b"><button onclick="getcard('C2_b');highlight('C2c')" id="C2c" class="btn btn-probker"><img src="img/card_icons/card(9).svg" width="65" height="100"/></button></span>
          <span id="C3_b"><button onclick="getcard('C3_b');highlight('C3c')" id="C3c" class="btn btn-probker"><img src="img/card_icons/card(13).svg" width="65" height="100"/></button></span>
          <span id="C4_b"><button onclick="getcard('C4_b');highlight('C4c')" id="C4c" class="btn btn-probker"><img src="img/card_icons/card(17).svg" width="65" height="100"/></button></span>
          <span id="C5_b"><button onclick="getcard('C5_b');highlight('C5c')" id="C5c" class="btn btn-probker"><img src="img/card_icons/card(21).svg" width="65" height="100"/></button></span>
          <span id="C6_b"><button onclick="getcard('C6_b');highlight('C6c')" id="C6c" class="btn btn-probker"><img src="img/card_icons/card(25).svg" width="65" height="100"/></button></span>
          <span id="C7_b"><button onclick="getcard('C7_b');highlight('C7c')" id="C7c" class="btn btn-probker"><img src="img/card_icons/card(29).svg" width="65" height="100"/></button></span>
          <span id="C8_b"><button onclick="getcard('C8_b');highlight('C8c')" id="C8c" class="btn btn-probker"><img src="img/card_icons/card(33).svg" width="65" height="100"/></button></span>
          <span id="C9_b"><button onclick="getcard('C9_b');highlight('C9c')" id="C9c" class="btn btn-probker"><img src="img/card_icons/card(37).svg" width="65" height="100"/></button></span>
          <span id="C10_b"><button onclick="getcard('C10_b');highlight('C10c')" id="C10c" class="btn btn-probker"><img src="img/card_icons/card(41).svg" width="65" height="100"/></button></span>
          <span id="C11_b"><button onclick="getcard('C11_b');highlight('C11c')" id="C11c" class="btn btn-probker"><img src="img/card_icons/card(45).svg" width="65" height="100"/></button></span>
          <span id="C12_b"><button onclick="getcard('C12_b');highlight('C12c')" id="C12c" class="btn btn-probker"><img src="img/card_icons/card(49).svg" width="65" height="100"/></button></span>
          <span id="C13_b"><button onclick="getcard('C13_b');highlight('C13c')" id="C13c" class="btn btn-probker"><img src="img/card_icons/card(1).svg" width="65" height="100"/></button></span>
        </tr>
        </div>
      </div>
    </div>
<h2 class="row-title">Player Cards</h2>

<table id="table_player_card">
  
</table>

<script>
	function getcard(id) {
    const card = document.createElement("td");
    card.setAttribute("id", id.concat("_t"));
    const textcard = document.getElementById(id);
    const clone = textcard.cloneNode(true)
    card.appendChild(clone);
   
    var table = document.getElementById("table_player_card");
    var table_flop_turn_river = document.getElementById("table_flop_turn_river")   
    loop1:
    for(var i = 0, row; row = table.rows[i]; i++){
      for(var j = 0, cell ; cell = row.cells[j] ; j++){
        var occupied_cell = Check_If_Card_Is_In_Table(table, id)
        
        var occupied_cell_FTR = Check_If_Card_Is_In_Table(table_flop_turn_river, id)

        if (occupied_cell_FTR) {
          occupied_cell_FTR[0].innerHTML = ftr_names[occupied_cell_FTR[1]]
            break loop1;
        }
        
        if (occupied_cell) {
          var player_number = occupied_cell[0].getAttribute("id").slice(0,1)
          player_number = number_to_player(player_number)
          occupied_cell[0].innerHTML = `<h1>p${player_number}</h1>`
          break loop1;
        } else if (cell.innerHTML[4] == "p"){
            cell.innerHTML = document.getElementById(id).innerHTML
            break loop1;
        } else if (occupied_cell){
            cell.innerHTML = `<h1>p${id}</h1>`
          break loop1;
        } else {
          if (!full(table)) {
            continue
          }

          ftr_names = ["<h1>F1</h1>", "<h1>F2</h1>", "<h1>F3</h1>","<h1>T</h1>","<h1>R</h1>"]
          var FTR = ["F", "T", "R"]
          for(var i = 0, cell_ftr; cell_ftr = table_flop_turn_river.rows[0].cells[i] ; i++ ) {
            var occupied_cell = Check_If_Card_Is_In_Table(table_flop_turn_river, id)
            if (occupied_cell) {
              console.log(occupied_cell[1])
              occupied_cell[0].innerHTML = ftr_names[occupied_cell[1]]
              break loop1;
            } else if (FTR.includes(cell_ftr.innerHTML[4]) ){
              console.log(occupied_cell)
              console.log(document.getElementById(id).innerHTML  )
              cell_ftr.innerHTML = document.getElementById(id).innerHTML  
              break loop1;
            }
          }
        }
      }
    }
  };
  function full(table){
    for(var i = 0, row; row = table.rows[i]; i++){
      for(var j = 0, cell ; cell = row.cells[j] ; j++){
        if ( (cell.innerHTML[4] == "p") ){
          return false
        }
      }
    }
    return true
    }

  function Check_If_Card_Is_In_Table(table, id){
    for(var i = 0, row; row = table.rows[i]; i++){
      for(var j = 0, cell ; cell = row.cells[j] ; j++){
        if (cell.innerHTML.substring(0, 64) == document.getElementById(id).innerHTML.substring(0, 64)){
          return [cell, j]
        }
      }
    }
  }
  

</script>

<h2>Flop Turn River</h2>

<table id="table_flop_turn_river">
  
</table>


<h2>Number of Simulations</h2>
<div class="center">
  <span id="number_of_simulations_displayer"><h1>"jer"</h1></span>
  <input type="range" event="change" min="2" max="5" value="3" step="1" class="slider" id="myRange">
</div>

<script>
  
  range = document.getElementById("myRange")

  var value = document.getElementById("myRange").value
  document.getElementById("number_of_simulations_displayer").innerHTML = `<h2>${10**value}</h2>`
  range.addEventListener('input', sim_number);

  function sim_number() {
    var value = document.getElementById("myRange").value
    document.getElementById("number_of_simulations_displayer").innerHTML = `<h2>${10**value}</h2>`;
  }

</script>


<h2>Probabilities</h2>
<div class="center">
  <form onsubmit='event.preventDefault(); sendcommand();'>
    <input class="btn btn-probker-players"  type='submit' value = 'Calculate'>
  </form>
</div>

<script>
  var game_object 
  function get_number_of_players() {
    for(var i = 2 ; i <= 9 ; i++){
      if(document.getElementById("p" + i).className == "btn btn-probker-players btn-probker-clicked"){
        return i
      }
    }
  }

  function number_to_player(n){
    if(n % 2 == 0){
      n = n - 1
    }
    return n - (n - 1) / 2
  }

  function get_player_cards() {
    table = document.getElementById("table_player_card")
    var array = []
    for(var i = 0, row; row = table.rows[i]; i++){
      for(var j = 0, cell ; cell = row.cells[j] ; j++){
        var card = cell.firstChild.getAttribute('id')
        var card_number
        if (card === null){
          array.push(0)
        } else if (card[0] == "H"){
          card_number = 0 + Number(card.slice(1, -1))
          array.push(card_number)
        } else if (card[0] == "S"){
          card_number = 13 + Number(card.slice(1, -1))
          array.push(card_number)
        } else if (card[0] == "D"){
          card_number = 26 + Number(card.slice(1, -1))
          array.push(card_number)
        } else if (card[0] == "C"){
          card_number = 39 + Number(card.slice(1, -1))
          array.push(card_number)
        }
      }
    }
    return array
  }

  function get_shared_cards() {
    table = document.getElementById("table_flop_turn_river")
    var array = []
    for(var i = 0, row; row = table.rows[i]; i++){
      for(var j = 0, cell ; cell = row.cells[j] ; j++){
        var card = cell.firstChild.getAttribute('id')
        if (card === null){

          array.push(0)
          if(j <= 2){
            continue;
          } 

        } else if (card[0] == "H"){
          card_number = Number(card.slice(1, -1))
          array.push(card_number)
        } else if (card[0] == "S"){
          card_number = Number(card.slice(1, -1)) + 13
          array.push(card_number)
        } else if (card[0] == "D"){
          card_number = Number(card.slice(1, -1)) + 26
          array.push(card_number)
        } else if (card[0] == "C"){
          card_number = Number(card.slice(1, -1)) + 39
          array.push(card_number)
        }
      }
    }
    return array
  }
  
  function get_number_of_simulations() {
    return 10**document.getElementById("myRange").value
  }

  function calculate_button(){
    let game_JSON = {number_of_players: get_number_of_players(),
                player_cards: get_player_cards(), 
                shared_cards: get_shared_cards(),
                simulations:  get_number_of_simulations()}
    console.log(JSON.stringify(game_JSON))
    return JSON.stringify(game_JSON)
  }

  input = document.getElementById('command');
  result = document.getElementById('result');
  const ws = new WebSocket('ws://localhost:8081')

  function sendcommand(){
    ws.send(`${calculate_button()}`)
  }

  let probabilities
  ws.addEventListener('message', (message) => {
    probabilities = JSON.parse(message.data)
    Create_Pie_Chart()
    console.log('Message from server ', probabilities);
});

function Create_Pie_Chart(){
  document.getElementById("probabilities").innerHTML = ''
  var pie_table = document.createElement('tr')
  for(var i = 0 ; i < probabilities[0].length ; i++){
    var header = document.createElement('td');
    header.style.backgroundColor = "#DAAB99"
    header.setAttribute("width", "105")
    header.setAttribute("height", "85")
    header.innerHTML = `<h1 style=color:#292c2a;">${(Math.round(probabilities[0][i] * 1000)/10).toFixed(1)}</h1>`;
    document.getElementById("probabilities").appendChild(header)
  }
}



</script>

<h2>Probabilities for each player</h2>
<div class="center">
  <span id="probabilities"></span>
</div>

<h2> Pie chart for each player </h2>

</body>
</html>